accessibility: Private
responseTimeout: 600
↓makeImage [steps.SimpleStep-1618220080331]: 
  expression: |
    'var RenderingHints = use("java.awt.RenderingHints");
    var ImageIO        = use("javax.imageio.ImageIO");
    
    logo = ImageIO.read(new java.io.File(logo));
    background = java.awt.Color.decode(background);
    
    var re = new RegExp("(\\d+)(?:-(\\d+))?.*\\.(\\w+)$");
    var logo_w = logo.getWidth();
    var logo_h = logo.getHeight();
    var logo_r = logo_w / logo_h; 
    
    new java.io.File(destination).mkdirs();
    
    for (k in outputs) {
    	var output = outputs[k];
    	var m = output.match(re);
    	if (m == null) {
    		continue;
    	}
    	var w = m[1];
    	var h = m[2] ? m[2] : w;
    	var r = w / h;
    	var ext = m[3];
    	
    	var img = new java.awt.image.BufferedImage(w, h, java.awt.image.BufferedImage.TYPE_INT_RGB);
    	var g = img.createGraphics();
    	g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    	g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
    	g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    	g.setColor(background);
    	g.fillRect(0, 0, w, h);
    	var nW = Math.round(r > 1 ? h * logo_r : w);
    	var nH = Math.round(r > 1 ? h : w / logo_r);
    	if (nW > w) {
    		nH = Math.round(nH * (w / nW));
    		nW = w;
    	} else if (nH > h) {
    		nW = Math.round(nW * (h / nH));
    		nH = h;
    	}
    	
    	g.drawImage(logo, (w - nW) / 2, (h - nH) / 2, nW, nH, null);
    	ImageIO.write(img, ext, new java.io.File(destination, output));
    }
    '
↓logo [variables.RequestableVariable-1618220080334]: 
↓destination [variables.RequestableVariable-1618220080343]: 
↓background [variables.RequestableVariable-1618220080346]: 
  value: '#ffffff'
↓outputs [variables.RequestableMultiValuedVariable-1618220323681]: 
  value: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
      - com.twinsoft.convertigo.beans.common.XMLVector: 